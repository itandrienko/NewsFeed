const data = {
    "sources": [{"id": 1, "name": "meduza"}, {"id": 6, "name": "3dnews"}, {"id": 7, "name": "nytimes"}, {
        "id": 8,
        "name": "forbes"
    }, {"id": 9, "name": "igromania"}, {"id": 10, "name": "buro237"}, {"id": 11, "name": "rusvesna"}, {
        "id": 12,
        "name": "7ya"
    }, {"id": 14, "name": "aif"}, {"id": 15, "name": "gazetaru"}, {"id": 16, "name": "karpov.courses"}],
    "categories": [{"id": 1, "name": "tech"}, {"id": 2, "name": "sport"}, {"id": 3, "name": "fashion"}, {
        "id": 4,
        "name": "politics"
    }, {"id": 5, "name": "other"}, {"id": 6, "name": "karpov.courses"}],
    "items": [{
        "id": 87901,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:58:58 GMT+0300 (Moscow Standard Time)",
        "title": "Путин назвал причину своего кашля",
        "description": "Президент России Владимир Путин рассказал о причине своего кашля и заявил, что со здоровьем у него все нормально. Об этом он рассказал на совещании с постоянными членами Совбеза РФ.\n\n\"Валентина Ивановна (Матвиенко) не беспокойтесь, ...",
        "image": "https://img.gazeta.ru/files3/211/14034211/RIAN_6661933.HR-pic905-895x505-19909.jpg",
        "source_id": 15,
        "category_id": 4
    }, {
        "id": 87874,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:54:23 GMT+0300 (Moscow Standard Time)",
        "title": "Тинькофф банк вошел в перечень системно значимых",
        "description": "Теперь в списке находятся 13 банков, на долю которых приходится около 77% совокупных активов российского банковского сектора.",
        "image": "https://aif-s3.aif.ru/images/025/373/49a6d3fba70e2c1b0dae8811ad3b2dc4.jpg",
        "source_id": 14,
        "category_id": 4
    }, {
        "id": 87926,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:53:22 GMT+0300 (Moscow Standard Time)",
        "title": "В сети раскрыли стоимость новых Grand Theft Auto",
        "description": "В сети появились скриншоты с ценами на новую Grand Theft Auto: The Trilogy - The Definitive Edition. Пользователь Twitter раскрыл стоимость новинки на сайте британского магазина Base.\n\nПо предварительным данным, на PlayStation 4, Xbox One ...",
        "image": "https://img.gazeta.ru/files3/10/13702010/9326-gta-vc-2018-10-30-13-02-15-21-pic905-895x505-32116.jpg",
        "source_id": 15,
        "category_id": 1
    }, {
        "id": 87867,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:48:54 GMT+0300 (Moscow Standard Time)",
        "title": "Ситуация критическая: ЛНР ограничила движение на Украину",
        "description": "Специальный указ был подписан главой ЛНР.",
        "image": "https://rusvesna.su/sites/default/files/gerb_lnr_simvolika.jpg",
        "source_id": 11,
        "category_id": 5
    }, {
        "id": 87914,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:48:32 GMT+0300 (Moscow Standard Time)",
        "title": "Молдавия хочет подписать долгосрочный контракт с \"Газпромом\"",
        "description": "Молдавский министр по инфраструктуре Андрей Спыну заявил, что власти страны надеются подписать долгосрочный контракт на поставку газа с компанией \"Газпром\". Об этом сообщает РИА \"Новости\".\n\nНа прошлой неделе Спыну ...",
        "image": "https://img.gazeta.ru/files3/938/13995938/AP101029115546-pic905-895x505-15444.jpg",
        "source_id": 15,
        "category_id": 4
    }, {
        "id": 87865,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:48:00 GMT+0300 (Moscow Standard Time)",
        "title": "Игроки War Thunder сняли ролик в поддержку фильма о Лидии Литвяк",
        "description": "Работу над ним ведёт студия «28 Панфиловцев».",
        "image": "https://cdn.igromania.ru/mnt/news/b/5/2/6/e/b/109638/50159a4e1b392974_848x477.jpg",
        "source_id": 9,
        "category_id": 1
    }, {
        "id": 87870,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:45:05 GMT+0300 (Moscow Standard Time)",
        "title": "Cardi B спланировала и провела свадьбу для ЛГБТ-пары",
        "description": "В декабре 2020 года Cardi B запустила реалити-шоу, в котором она пробует себя в разных профессиях. В новом эпизоде хип-хоп-исполнительница стала свадебным организатором и лицензированным церемониймейстером. Помогала ей актриса Рейвен Симон. Об этом пишет Dazed.  Cardi B и Рейвен...",
        "image": "https://www.buro247.ru/images/andreeva/670x340_cardi1110.jpg",
        "source_id": 10,
        "category_id": 5
    }, {
        "id": 87880,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:44:18 GMT+0300 (Moscow Standard Time)",
        "title": "Против директора и охраны школы в Махачкале возбудили дела после убийства",
        "description": "Расследование по делам поставлено на контроль в центральном аппарате СКР.",
        "image": "https://aif-s3.aif.ru/images/025/372/d3e7fd239323d0973ae5db8ee7f52640.jpg",
        "source_id": 14,
        "category_id": 5
    }, {
        "id": 87869,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:44:05 GMT+0300 (Moscow Standard Time)",
        "title": "Суд признал законной блокировку ютьюб-канала и сайта Навального",
        "description": "Тверской суд Москвы отклонил иск Алексея Навального к Генпрокуратуре РФ и Роскомнадзору из-за блокировки ютьюб-канала «Навальный Live» и сайта «Свободу Навальному». Об этом сообщает «Интерфакс» со ссылкой на пресс-службу суда.",
        "image": "",
        "source_id": 1,
        "category_id": 4
    }, {
        "id": 87903,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:43:54 GMT+0300 (Moscow Standard Time)",
        "title": "В Киеве рассказали о развале Украины по схеме Сомали",
        "description": "Бывший депутат Верховной рады Украины Борислав Береза высказал мнение о новом законе об олигархах. Об этом он рассказал в эфире телеканала \"Украина 24\".\n\n\"К этому законопроекту много вопросов, особенно по тому, как его ...",
        "image": "https://img.gazeta.ru/files3/161/13343161/20200823_zaa_p133_059-pic905-895x505-93970.jpg",
        "source_id": 15,
        "category_id": 4
    }, {
        "id": 87866,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:37:02 GMT+0300 (Moscow Standard Time)",
        "title": "\"Загитовой не объяснили, что она публичный человек и придется терпеть унижения\"",
        "description": "Алина Загитова опубликовала заявление, в котором пожаловалась на СМИ, которые в подробностях рассказывают обо всех аспектах ее жизни, и заявила, что намерена защищать свои личные границы. Ранее журналист \"Спорт-экспресса\" Рустам Имамов сообщил, что Загитова якобы требовала удалить видео с хоккейного матча, на которое она случайно попала, и угрожала судом. Продюсер Иосиф Пригожин в комментарии \"Газете.Ru\" предположил, что олимпийская чемпионка еще не свыклась со своим статусом публичного человека, и призвал не быть строгим по отношению к \"ребенку\".",
        "image": "https://img.gazeta.ru/files3/773/13274773/RIAN_6109420.HR-pic905-895x505-55906.jpg",
        "source_id": 15,
        "category_id": 2
    }, {
        "id": 87877,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:35:56 GMT+0300 (Moscow Standard Time)",
        "title": "Vagabond представил новую премиальную коллекцию Atelier",
        "description": "Vagabond показал новую осенне-зимнюю капсульную коллекцию Atelier. В нее вошли жокейские сапоги, ботильоны с низким вырезом асимметричной формы и лоферы с квадратным носом, а также сумка с плечом для ношения на плече. Палитру составили нейтральные цвета — черный, кремовый и...",
        "image": "https://www.buro247.ru/images/andreeva/670x340_vag1110.jpg",
        "source_id": 10,
        "category_id": 3
    }, {
        "id": 87882,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:35:03 GMT+0300 (Moscow Standard Time)",
        "title": "Осеннее меню: сезонное питание для здоровья и энергии",
        "description": "Каждый сезон мы меняем гардероб, но надо бы заодно сменить и рацион. Причем не просто перейти на сезонные овощи и фрукты. Все немного сложнее, и связаны такие перемены с биоритмами. В течение дня меняется концентрация веществ в организме (именно поэтому кровь мы сдаем...",
        "image": "https://www.buro247.ru/local/share/images/81784.JPG",
        "source_id": 10,
        "category_id": 3
    }, {
        "id": 87886,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:34:19 GMT+0300 (Moscow Standard Time)",
        "title": "Кабмин решил упростить подключение садовых участков к электросетям",
        "description": "До участка ветку будет тянуть сетевая компания, завершить работы она должна за 30 дней.",
        "image": "https://aif-s3.aif.ru/images/025/372/d627b324d6598fc5f64ff0b4a31ca518.jpg",
        "source_id": 14,
        "category_id": 5
    }, {
        "id": 87871,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:33:00 GMT+0300 (Moscow Standard Time)",
        "title": "Старые герои возвращаются на первых кадрах нового «Крика»",
        "description": "Премьера фильма состоится в январе 2022 года.",
        "image": "https://cdn.igromania.ru/mnt/news/c/6/1/7/a/0/109637/6234e86b4f8ebc92_848x477.jpg",
        "source_id": 9,
        "category_id": 1
    }, {
        "id": 87905,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:31:56 GMT+0300 (Moscow Standard Time)",
        "title": "На Украине выдвинули территориальные претензии России",
        "description": "Депутат Верховной рады Алексей Гончаренко заявил, что Украина планирует \"вернуть\" Кубань, когда к власти в Киеве придет \"честное руководство\". Об этом он рассказал на своем YouTube-канале.\n\nГончаренко считает, что ...",
        "image": "https://img.gazeta.ru/files3/941/12068941/RIAN_3288385.HR-pic905-895x505-86012.jpg",
        "source_id": 15,
        "category_id": 4
    }, {
        "id": 87925,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:29:00 GMT+0300 (Moscow Standard Time)",
        "title": "В эмулятор для классических игр ScummVM добавили поддержку 10 движков",
        "description": "Эмулятор ScummVM отпраздновал 20-летие выпуском большого обновления 2.5.0. Авторы сборника воссозданных игровых движков объявили о поддержке 10 новых платформ, благодаря чему ScummVM может эмулировать такие классические 2,5D-игры, как Grim Fandango, The Longest Journey и Myst 3: Exile.",
        "image": "https://3dnews.ru/assets/external/illustrations/2021/10/11/1051016/doublefine.jpg",
        "source_id": 6,
        "category_id": 1
    }, {
        "id": 87919,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:29:00 GMT+0300 (Moscow Standard Time)",
        "title": "В России представлен Vivo Y53s — смартфон с ёмкой батареей и расширяемой оперативной памятью",
        "description": "Бренд Vivo представил в России новый смартфон среднего ценового сегмента. Модель Y53s оснащена аккумулятором ёмкостью 5000 мА·ч с быстрой зарядкой — это позволит обеспечить долгое время работы даже при интенсивном использовании. А активное потребление вычислительных ресурсов предлагается компенсировать за счёт технологии расширения ОЗУ за счёт флеш-памяти (наподобие файла подкачки в ПК).",
        "image": "https://3dnews.ru/assets/external/illustrations/2021/10/11/1051011/603fe3c1e3.jpg",
        "source_id": 6,
        "category_id": 1
    }, {
        "id": 87884,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:28:35 GMT+0300 (Moscow Standard Time)",
        "title": "12 октября пройдет телемарафон «Агенты людей». Это акция против законодательства об «иноагентах». В ней поучаствуют Познер, БГ и многие другие",
        "description": "В эфире телеканала «Дождь» и на его ютьюб-канале 12 октября с 12:00 до 18:00 пройдет марафон «Агенты людей». Его участники потребуют отменить законодательство об «иностранных агентах». ",
        "image": "",
        "source_id": 1,
        "category_id": 4
    }, {
        "id": 87907,
        "lang": "ru",
        "date": "Mon Oct 11 2021 16:28:01 GMT+0300 (Moscow Standard Time)",
        "title": "Сурков предрек ядерную войну за \"американское наследство\" ",
        "description": "В ближайшие сто лет произойдет несколько войн за американское наследство, в том числе, возможно, и ядерная. Такое мнение выразил бывший помощник президента России Владислав Сурков в статье \"Безлюдная демократия и другие политические ...",
        "image": "https://img.gazeta.ru/files3/430/12928430/RIAN_5615942.HR-pic905-895x505-27387.jpg",
        "source_id": 15,
        "category_id": 4
    }]
}

const mainNews = data.items.slice(0, 3);
const smallNews = data.items.slice(3, 12);

const mainNewsTemplate = document.getElementById("mainArticleTemplate");
const smallNewsTemplate = document.getElementById("smallArticleTemplate");
const mainNewsContainer = document.querySelector(".articles__big-column");
const smallNewsContainer = document.querySelector(".articles__small-column");

const escapeString = (string) => {
    const symbols = {
        "&": "&amp",
        "<": "&lt",
        ">": "&gt",
    }

    return string.replace(/[&<>]/g, (tag) => {
        return symbols[tag] || tag;
    });
}

mainNews.forEach((item) => {
    const template = document.createElement("template");
    const categoryData = data.categories.find((categoryItem) => categoryItem.id === item.category_id);
    const sourceData = data.sources.find((sourceItem) => sourceItem.id === item.source_id);

    template.innerHTML = `
        <article class="main-article">
            <div class="main-article__image-container">
                <img class="main-article__image" src="${encodeURI(item.image)}" alt="Фотография новости">
            </div>
            <div class="main-article__content">
                <span class="main-article__category article-category">${escapeString(categoryData.name)}</span>
                <h2 class="main-article__title">${escapeString(item.title)}</h2>
                <p class="main-article__text">${escapeString(item.description)}</p>
                <span class="main-article__source article-source">${escapeString(sourceData.name)}</span>
            </div>
        </article>
    `;

    mainNewsContainer.appendChild(template.content);
});

smallNews.forEach((item) => {
    const template = document.createElement("template");
    const sourceData = data.sources.find((sourceItem) => sourceItem.id === item.source_id);
    const dateData = new Date(item.date).toLocaleDateString('ru-RU', {month: "long", day: "numeric"});

    template.innerHTML = `
        <article class="small-article">
            <h2 class="small-article__title">${escapeString(item.title)}</h2>
            <p class="small-article__caption">
                <span class="small-article__date article-date">${dateData}</span>
                <span class="small-article__source article-source">${escapeString(sourceData.name)}</span>
            </p>
        </article>
    `;

    smallNewsContainer.appendChild(template.content);
})